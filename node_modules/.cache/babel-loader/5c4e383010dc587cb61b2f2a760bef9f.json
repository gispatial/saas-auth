{"remainingRequest":"/Users/crocslut/Desktop/www/latest/auth/xdt-001/node_modules/babel-loader/lib/index.js!/Users/crocslut/Desktop/www/latest/auth/xdt-001/src/auth/authenticationGuard.js","dependencies":[{"path":"/Users/crocslut/Desktop/www/latest/auth/xdt-001/src/auth/authenticationGuard.js","mtime":1616653650678},{"path":"/Users/crocslut/Desktop/www/latest/auth/xdt-001/node_modules/cache-loader/dist/cjs.js","mtime":1616393837327},{"path":"/Users/crocslut/Desktop/www/latest/auth/xdt-001/node_modules/babel-loader/lib/index.js","mtime":1616393837315}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgZ2V0SW5zdGFuY2UgfSBmcm9tICIuL2F1dGgwLXBsdWdpbiI7CmV4cG9ydCB2YXIgYXV0aGVudGljYXRpb25HdWFyZCA9IGZ1bmN0aW9uIGF1dGhlbnRpY2F0aW9uR3VhcmQodG8sIGZyb20sIG5leHQpIHsKICB2YXIgYXV0aFNlcnZpY2UgPSBnZXRJbnN0YW5jZSgpOwoKICB2YXIgZ3VhcmRBY3Rpb24gPSBmdW5jdGlvbiBndWFyZEFjdGlvbigpIHsKICAgIGlmIChhdXRoU2VydmljZS5pc0F1dGhlbnRpY2F0ZWQpIHsKICAgICAgcmV0dXJuIG5leHQoKTsKICAgIH0KCiAgICBhdXRoU2VydmljZS5sb2dpbldpdGhSZWRpcmVjdCh7CiAgICAgIGFwcFN0YXRlOiB7CiAgICAgICAgdGFyZ2V0VXJsOiB0by5mdWxsUGF0aAogICAgICB9CiAgICB9KTsKICB9OyAvLyBJZiB0aGUgQXV0aDBQbHVnaW4gaGFzIGxvYWRlZCBhbHJlYWR5LCBjaGVjayB0aGUgYXV0aGVudGljYXRpb24gc3RhdGUKCgogIGlmICghYXV0aFNlcnZpY2UuaXNMb2FkaW5nKSB7CiAgICByZXR1cm4gZ3VhcmRBY3Rpb24oKTsKICB9CgogIGF1dGhTZXJ2aWNlLiR3YXRjaCgiaXNMb2FkaW5nIiwgZnVuY3Rpb24gKGlzTG9hZGluZykgewogICAgaWYgKGlzTG9hZGluZyA9PT0gZmFsc2UpIHsKICAgICAgcmV0dXJuIGd1YXJkQWN0aW9uKCk7CiAgICB9CiAgfSk7Cn07"},{"version":3,"sources":["/Users/crocslut/Desktop/www/latest/auth/xdt-001/src/auth/authenticationGuard.js"],"names":["getInstance","authenticationGuard","to","from","next","authService","guardAction","isAuthenticated","loginWithRedirect","appState","targetUrl","fullPath","isLoading","$watch"],"mappings":"AAAA,SAASA,WAAT,QAA4B,gBAA5B;AAEA,OAAO,IAAMC,mBAAmB,GAAG,SAAtBA,mBAAsB,CAACC,EAAD,EAAKC,IAAL,EAAWC,IAAX,EAAoB;AACrD,MAAMC,WAAW,GAAGL,WAAW,EAA/B;;AAEA,MAAMM,WAAW,GAAG,SAAdA,WAAc,GAAM;AACxB,QAAID,WAAW,CAACE,eAAhB,EAAiC;AAC/B,aAAOH,IAAI,EAAX;AACD;;AAEDC,IAAAA,WAAW,CAACG,iBAAZ,CAA8B;AAAEC,MAAAA,QAAQ,EAAE;AAAEC,QAAAA,SAAS,EAAER,EAAE,CAACS;AAAhB;AAAZ,KAA9B;AACD,GAND,CAHqD,CAWrD;;;AACA,MAAI,CAACN,WAAW,CAACO,SAAjB,EAA4B;AAC1B,WAAON,WAAW,EAAlB;AACD;;AAEDD,EAAAA,WAAW,CAACQ,MAAZ,CAAmB,WAAnB,EAAgC,UAACD,SAAD,EAAe;AAC7C,QAAIA,SAAS,KAAK,KAAlB,EAAyB;AACvB,aAAON,WAAW,EAAlB;AACD;AACF,GAJD;AAKD,CArBM","sourcesContent":["import { getInstance } from \"./auth0-plugin\";\n\nexport const authenticationGuard = (to, from, next) => {\n  const authService = getInstance();\n\n  const guardAction = () => {\n    if (authService.isAuthenticated) {\n      return next();\n    }\n\n    authService.loginWithRedirect({ appState: { targetUrl: to.fullPath } });\n  };\n\n  // If the Auth0Plugin has loaded already, check the authentication state\n  if (!authService.isLoading) {\n    return guardAction();\n  }\n\n  authService.$watch(\"isLoading\", (isLoading) => {\n    if (isLoading === false) {\n      return guardAction();\n    }\n  });\n};\n"]}]}